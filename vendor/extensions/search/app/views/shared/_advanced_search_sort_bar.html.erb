<%
  # Build the custom parameters hash and don't clutter the url with empty params.
  temp = {}
  temp.merge!(:taxon => params[:taxon]) if !params[:taxon].nil? && !params[:taxon].empty?
  temp.merge!(:subtaxons => params[:subtaxons]) if params[:subtaxons] != "0"
  temp.merge!(:min_price => params[:min_price]) if !params[:min_price].nil? && !params[:min_price].empty?
  temp.merge!(:max_price => params[:max_price]) if !params[:max_price].nil? && !params[:max_price].empty?
  temp.merge!(:keywords => params[:keywords]) if !params[:keywords].nil? && !params[:keywords].empty?
  temp.merge!(:p => params[:p]) if !params[:p].nil? && !params[:p].empty?
%>

<table class="product_sorter">
<tr>

<td>
  <%= t("sort_by") %>:
</td>

<td>&nbsp;</td>

<td>
  <%= link_to t("name"),
    temp.merge(:sort => "name_#{@sort_by.include?('ASC') ? 'desc' : 'asc'}")
  -%>
</td>
<td>
  <% if @sort_by.include?('name') -%>
    <%= @sort_by.include?('ASC') ? t("asc") : t("desc") %>
  <% end -%>
</td>

<td>&nbsp;</td>

<td>
  <%= link_to t("price"),
    temp.merge(:sort => "price_#{@sort_by.include?('ASC') ? 'desc' : 'asc'}")
  -%>
</td>
<td>
  <% if @sort_by.include?('master_price') -%>
    <%= @sort_by.include?('ASC') ? t("asc") : t("desc") %>
  <% end -%>
</td>

<td>&nbsp;</td>

<td class="sort_item">
  <%= link_to t("date"),
    temp.merge(:sort => "date_#{@sort_by.include?('ASC') ? 'desc' : 'asc'}")
  -%>
</td>
<td>
  <% if @sort_by.include?('available_on') -%>
    <%= @sort_by.include?('ASC') ? t("asc") : t("desc") %>
  <% end -%>
</td>

</tr>
</table>
